<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modular Test</title>
    <style>
        body { font-family: Arial, sans-serif; background: #000; color: #fff; padding: 20px; }
        .test-result { background: #333; padding: 15px; margin: 10px 0; border-radius: 5px; }
        .pass { background-color: #4caf50; }
        .fail { background-color: #f44336; }
    </style>
</head>
<body>
    <h1>Modular JavaScript Test</h1>
    <div id="testResults"></div>
    
    <!-- Load modular scripts -->
    <script src="js/game.js"></script>
    <script src="js/auec.js"></script>
    <script src="js/ui.js"></script>
    
    <script>
        function runTests() {
            const results = document.getElementById('testResults');
            let testsPassed = 0;
            let testsTotal = 0;
            
            function addTest(name, passed, message) {
                testsTotal++;
                if (passed) testsPassed++;
                
                const div = document.createElement('div');
                div.className = `test-result ${passed ? 'pass' : 'fail'}`;
                div.innerHTML = `<strong>${name}:</strong> ${passed ? '‚úÖ PASS' : '‚ùå FAIL'} - ${message}`;
                results.appendChild(div);
            }
            
            // Test 1: DifferentialGame class exists
            addTest('Class Definition', 
                typeof DifferentialGame === 'function',
                'DifferentialGame class is defined');
            
            // Test 2: Game instance can be created
            let game;
            try {
                // Mock required DOM elements
                document.body.innerHTML += `
                    <div id="gameBoard"></div>
                    <div id="gameMessage"></div>
                    <input id="guessInput" />
                    <button id="submitGuess">Submit</button>
                    <span id="attempts">3</span>
                    <span id="lastUpdated">Test</span>
                `;
                
                game = new DifferentialGame();
                addTest('Game Instantiation', 
                    game instanceof DifferentialGame,
                    'Game instance created successfully');
            } catch (error) {
                addTest('Game Instantiation', 
                    false,
                    `Error: ${error.message}`);
            }
            
            // Test 3: AUEC methods exist
            addTest('AUEC Methods', 
                game && typeof game.calculateAUEC === 'function' && typeof game.getAUECConfig === 'function',
                'AUEC calculation methods are available');
            
            // Test 4: UI methods exist
            addTest('UI Methods', 
                game && typeof game.showMessage === 'function' && typeof game.showAUECOnly === 'function',
                'UI display methods are available');
            
            // Test 5: Game methods exist
            addTest('Game Methods', 
                game && typeof game.flipTile === 'function' && typeof game.makeGuess === 'function',
                'Core game methods are available');
            
            // Test 6: Config method works
            try {
                const config = game ? game.getAUECConfig() : null;
                addTest('AUEC Config', 
                    config && config.costWeights && config.infoWeights,
                    'AUEC configuration loaded successfully');
            } catch (error) {
                addTest('AUEC Config', 
                    false,
                    `Config error: ${error.message}`);
            }
            
            // Summary
            const summary = document.createElement('div');
            summary.className = `test-result ${testsPassed === testsTotal ? 'pass' : 'fail'}`;
            summary.innerHTML = `<strong>Summary:</strong> ${testsPassed}/${testsTotal} tests passed ${testsPassed === testsTotal ? 'üéâ' : '‚ö†Ô∏è'}`;
            results.appendChild(summary);
            
            return testsPassed === testsTotal;
        }
        
        // Run tests when page loads
        setTimeout(runTests, 100);
    </script>
</body>
</html>